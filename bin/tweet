#!/usr/bin/env perl

use strict;
use warnings;

use Net::Twitter;
use Config::Tiny;
#use Getopt::Long qw(:config pass_through);

use constant CONF => glob '~/.twitter';

my $cfg = Config::Tiny->read( CONF )
 or die "Can't read ", CONF, ": $!\n";

my $user = getlogin;
die "No credentials for $user in ", CONF
 unless exists $cfg->{$user};

my $twit = Net::Twitter->new(
  username => $cfg->{$user}{user},
  password => $cfg->{$user}{pass}
);

my $msg = join ' ', @ARGV;
$twit->update($msg);
