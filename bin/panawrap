#!/usr/bin/env perl

use strict;
use warnings;

use File::Basename;
use File::Find;

find {
  wanted => sub {
    return unless /\.MTS$/i;
    my $mts  = $_;
    my $name = basename lc( $mts ), '.mts';
    my $mov  = "$name.mov";
    print "$mts -> $mov\n";
    my @cmd = (
      'ffmbc',
      -i      => $mts,
      -acodec => 'libfaac',
      -ab     => '256k',
      -vcodec => 'copy',
      -r      => 50,
      $mov
    );
    system @cmd;
  },
  no_chdir => 1
}, @ARGV;

__DATA__
set -x find "$1" -name \*. MTS -print | while read mts;
do name = $( basename "$mts" . MTS ) mov = "$name.mov" [ -f "$mov" ]
 || ffmpeg -y -i "$mts" -acodec copy - vcodec copy "$mov" echo
 "Done" done

 # vim:ts=2:sw=2:sts=2:et:ft=perl

