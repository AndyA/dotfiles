#!/usr/bin/env perl

use strict;
use warnings;
use File::Find;
use File::Spec;

@ARGV = '.' unless @ARGV;

scan( $_ ) for @ARGV;

sub scan {
  my $dir = shift;
  if ( -d File::Spec->catdir( $dir, '.svn' ) ) {
    print "$dir\n";
    return;
  }
  if ( opendir my $dh, $dir ) {
    my @files = grep { -d $_ }
      map { File::Spec->catdir( $dir, $_ ) }
      grep { $_ !~ /^\./ } readdir $dh;
    closedir $dh;
    scan( $_ ) for @files;
  }
  else {
    warn "Can't read $dir ($!)\n";
  }
}
