#!/usr/bin/env perl

use strict;
use warnings;

use Regexp::Common qw[Email::Address];
use Email::Address;

my %seen = ();
my $re   = $RE{Email}{Address};
while ( <> ) {
    my ( @found ) = /($re)/g;
    my ( @addrs ) = map lc( $_->address ),
      Email::Address->parse( "@found" );
    for ( @addrs ) {
        print "$_\n" unless $seen{$_}++;
    }
}
