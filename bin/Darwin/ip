#!/usr/bin/env perl

use strict;
use warnings;
use IO::Interface::Simple;

if ( my ( $cmd1, $cmd2, $ifname ) = @ARGV ) {
  if ( $cmd1 eq 'addr' && $cmd2 eq 'list' ) {
    my $iface = IO::Interface::Simple->new( $ifname );
    if ( defined( my $addr = $iface->address ) ) {
      print "inet $addr/24\n";
    }
    else {
      die qq{Device "$ifname" does not exist or is not }
       . qq{bound to an address.\n};
    }
  }
  else {
    die "Unknown command pair: $cmd1 $cmd2. Bear in\n"
     . "mind that I'm not the real ip. I'm a pale\n"
     . "imposter.\n";
  }
}
else {
  die "Too few args\n";
}
